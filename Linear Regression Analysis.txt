# Linear Regression Analysis

What is Linear Regression Model?

1. 회귀분석의 기초 
결과를 일으키는 원인을 찾아가는 과정. 
통계적인 관점으로 보면 종속 변수를 설명하기 위해서, 체계적 변수와 비체계적 변수로 설명하는 수식
    * 종속변수: 실험에서는 결과에 해당하는 값이고, 1차 방정식으로 간단하게 이해하면 y에 해당한다
    ** 쳬계적변수: 이는 사람이 설정, 통제 혹은 조절할 수 있는 영역으로 연구자들이 인위적으로 변화를 만들수 있는 부분
        - 독립변수: 원인에 해당하는 개념이고, 논문이나 실험 환경에서는 자극이나 처치라고도 한다
        - 통제변수: 인위적으로 조작할 수 있지만, 연구에서 핵심적인 관점을 두지 않는 대상
            -- 실험 연구 환경: 무작위 배분과 같이 독립변수 이외에 종속 변수에 영향을 주는 대상들을 통제하는 것을 의미한다
            -- 예측(이해) 분야: 모델의 타당성을 높이는 역할을 수행함. 모형 전체가 통제 변수를 control 했을때 유사한 결과값을 낼수있다면
                                모델이 다른 곳에서도 쓰일 수 있다는 의미로 해석될 수 있기 때문
    
    ** 비체계적변수: 통계 오차에 해당하는 개념이고, 보통 정규분포가 나오는 경우가 가장 이상적
                     오차 관측치가 서로 독립적이라면, 독립변수와 통제변수와도 독립적임을 가정할 수 있기 때문
                     이는 최대 엔트로피 분포로 이해할 수 있는게, 가장 편향적이지 않은 분포를 가정한다고 이해하면 됨. 

2. 선형회귀분석의 목적

(1) 데이터의 이해(Understanding)
    회귀분석의 기본 목적은 X(독립변수)를 갖고 Y(종속변수)의 변화를 이해하는 것이 핵심
    과거 현상이 어떤 원인 때문에 발생했는지 밝혀내고 이해하는데 사용
    (ex) 기본금리 상승과 이자율 상승은 어떤 관계를 갖는가하는 답을 찾는데에는 모델이 갖고 있는 설명력(R2)이 중요

(2) 예측 (Prediction)
    대표적인 머신러닝 분야 중 Supervised Learning에서 사용하는 모델 중 하나
    과거의 데이터를 기반으로 모델을 형성하여, 미래의 값을 예측하는데 사용하는 것
    (ex) 기본금리가 1%p 상승하면 코스피는 얼마나 증가 혹은 감소할지 예측하는데 사용한다면, 가장 중요한 지표는 F1-Score.

(3) 인과관계증명 (Cause & Effect)
    인과 관계를 측정하고 추적하는 기능을 수행할 수 있음
    다른 요인을 통제했을 때, 원하는 효과가 다시 반복적으로 나타나는가를 확인하는 것.
    추적(증명)은 종속변수(Y)의 변화를 독립변수(X)의 변인에 귀속시킬 수 있는지 검증하는 것.

=> 따라서 자기가 지금 어떠한 목적으로 데이터를 바라보는지에 따라 동일한 회귀분석이어도 사용할 수 있는 방법은 다양하다. 


3. Linear Regression Model의 수식

    y = alpha + beta*x1 + epcilon1, epcilon1*N*(0,sigma제곱)

    y는 종속변수로 Numeric scale을 갖고 있어야 한다.
    x는 독립변수로 이 또한 Numeric scale을 갖고 있어야 한다.
        베타는 X의 계수로 모델에서 찾고자 하는 핵심 값 중에 하나이다.
        가장 쉽게 말하면, X가 Y에게 얼마나 큰 영향력을 주는지 알아보는 것
    e(엡실론)은 통계 오차로 비체계적 변수에 해당하는 부분
        이 오차는 정규분포를 가정하고 있고, 그 이유는 최대 엔트로피 분포로 이해할 수 있는데, 가장 편향적이지 않은 분포를 가정한다.
        그래야 독립변수가 외생변수의 영향에 관계없이 독립적이고 일관적으로 종속 변수에 영향을 주는 것이 입증되기 때문이다.


4. 선형회귀분석의 해석 방법 - SDEM 방법

    step1. 유의성 검증 - significance
           계산한 X의 계수가 실제로 일반화할 수 있는 수치인지 확인하는 과정
           계수의 p-value가 유의한지 검증하는 것으로 진행한다
           사회과학에서는 0.05보다 작으면 계수는 유의한 것으로 해석
    
    step2. 방향성 확인 - Direction
           내가 세운 가설대로 계수의 방향성이 나오는지 확인하는 과정
           예를 들어 +라고 가설을 세웠는데, 반대의 경우가 나오는지 확인하는 것

    step3. 효과의 크기 - Effect Size 
           계수 자체의 절댓값을 측정하는 것
           유의하더라도 만약 그 효과 크기가 너무나도 작다면, 실험 결과를 반영하지 않을 수도 있다.
           예를들어, A버튼 보다 B버튼이 전환율이 높은데, 0.000001%p 높다고 하자. 
           그런데 A버튼 -> B버튼 개발하는데 1억이 들어간다면 결과를 있는 그대로 수용하기 힘들 수도 있다.

    step4. 모델 적합성 - Model fitting
           개념: 통계 모델이 "데이터셋을 전체적으로 얼마나 잘 설명했는가"를 나타내는 것이 모델 적합도.
           주어진 데이터셋을 모델이 오차범위 내에서 설명을 했다면 적합한 모델이라고 판단하는 것
                - Under-fitting 
                모델이 주어진 데이터셋을 아주 적게 설명하고, 오히려 설명하지 못한 데이터들이 많을때 under-fitting 되었다고 함 
                주로 데이터셋이 너무 방대하고 모델이 너무 단순할 때 나타날 수 있는 현상 

                - Over-fitting
                반대로 주어진 데이터셋은 잘 설명했는데 너무 잘 설명한 나머지 일반화 할 수 없는 상태. 
                다른 말로 이 데이터셋만 잘 설명하지, 다른 데이터셋에는 이 모델을 적용할 수 없는 상태를 의미함.


5. 코드로 Linear Regression Model 구현해보기 

    (1) 데이터셋 기본 설명 - kaggle
        - year_built: 건물이 지어진 연도 - 종속변수
        - sale_price: 부동산 판매 가격 - 독립변수

    (2) 데이터 분석 진행 
        목적1. 이해 & 인과관계 관측을 위한 데이터 분석(통계 해석학)
               회귀분석 결과를 해석하는 방법은 위에서 언급한 SDEM 방식으로 실습
        
        목적2. 예측을 위한 데이터 분석(Machine Learning의 예측) 
               회귀분석 실시 결과 기울기(계수)는 2687이다. 
               쉽게 말해서 건축연도가 한 단위(1년) 커질때마다 부동산 가격ㄱ은 2,678만큼 커진다는 뜻이다. 
               2010년도 건축물의 예측 가격은 259,896으로 예측되었다. 
               
















ref. https://data-marketing-bk.tistory.com/entry/Python-%EC%84%A0%ED%98%95%ED%9A%8C%EA%B7%80%EB%B6%84%EC%84%9D%EC%9D%84-%EC%9D%B4%EB%A1%A0-%EA%B2%B0%EA%B3%BC%ED%95%B4%EC%84%9D-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EC%BD%94%EB%93%9C%EA%B9%8C%EC%A7%80-Linear-Regression-Model